function getViewWidth(){return $(window).width()}function setupLevel2(e){if(!(!e.length>0)){var i=0,n=$(e.find(" > li")),t=!1;if(n.each(function(){$(this).height()>i&&(i=$(this).height()),$(this).find(" > ul.level3 ").length>0&&!t&&(t=!0)}),t){if($(n[2]).find("a").css("border-radius","0px 8px 0px 0px"),n.each(function(){$(this).css("height",i)}),n.length>3){for(var a=0,l=2;l<n.length;l+=3)$(n[l]).width()>a&&(a=$(n[l]).width());for(var l=2;l<n.length;l+=3)$(n[l]).css("width",a);for(var s=0,l=1;l<n.length;l+=3)$(n[l]).width()>s&&(s=$(n[l]).width());for(var l=1;l<n.length;l+=3)$(n[l]).css("width",s);for(var d=0,l=0;l<n.length;l+=3)$(n[l]).width()>s&&(d=$(n[l]).width());for(var l=0;l<n.length;l+=3)$(n[l]).css("width",d);$(e.find(" > li.last > a")).css("border-radius","0")}n.length<=1&&$(e.find(" > li.last > a")).css("border-radius","8px")}else $(e).find("br").remove(),$(e).find(" > li").css("display","block").css("background-image","none"),$(n[0]).find(" >a ").css("border-radius","8px 8px 0px 0px"),$(n[n.length-1]).find(" >a ").css("border-radius","0px 0px 8px 8px"),1==n.length&&$(n[0]).find(" >a ").css("border-radius","8px");var r=$(e).parent().position().left;console.log(r),console.log($(e).outerWidth()),console.log($("#main_Nav").width()),r+$(e).outerWidth()<$("#main_Nav").width()?$(e).css("margin-left",r):$(e).css("margin-left",$("#main_Nav").width()-$(e).outerWidth())}}$(document).ready(function(){$(".top-bar-nav > li, ul.level2").addClass("gradient"),$(document).click(function(){$("#main_Nav > li").removeClass("selected")}),$("#main_Nav > li").each(function(){var e=$(this);if(e.find("ul").length>0){var i=$(document.createElement("div"));i.addClass("decor-arrow"),e.find(">a").append(i)}e.click(function(i){$("#main_Nav > li").removeClass("selected"),e.addClass("selected"),setupLevel2($(this).find("ul.level2")),i.stopPropagation()}),e.hover(function(){$("#main_Nav > li").removeClass("selected"),e.addClass("selected"),setupLevel2($(this).find("ul.level2"))},function(){})}),$("ul.level2").each(function(){var e=$(this).find("> li");if(e.length>3)for(var i=0;i<e.length;i++)0==(i+1)%3&&$(e[i]).css("background-image","none").after("<br/>");$(this).click(function(e){e.stopPropagation()})}),$("ul.level3 > li > a > span").before("<span> &gt; </span>"),$("ul.level4 > li > a > span").before("<span> &bull; </span>")});